<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Register</title>
  <!-- Tailwind 'Play CDN' -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Times New Roman', serif;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
  <!-- Top Bar -->
  <header class="bg-blue-600 text-white p-4 flex items-center justify-between">
    <h1 class="text-xl font-bold">Cash Power System</h1>
    <nav>
      <a href="#" class="mr-4 hover:underline">Home</a>
      <a href="#" class="mr-4 hover:underline">Login</a>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto py-6">
    <div class="mx-auto max-w-4xl bg-white p-6 rounded shadow">
      <h2 class="text-2xl font-bold mb-6 text-center">Register</h2>

      <!-- Flash/Toast Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div id="flashMessages" class="mb-4 space-y-2">
            {% for category, message in messages %}
              <div class="px-4 py-2 rounded 
                  {% if category == 'success' %}
                    bg-green-100 text-green-700
                  {% else %}
                    bg-red-100 text-red-700
                  {% endif %}">
                {{ message }}
              </div>
            {% endfor %}
          </div>
          <script>
            setTimeout(() => {
              const flashDiv = document.getElementById('flashMessages');
              if(flashDiv) {
                flashDiv.style.transition = "opacity 0.5s ease-out";
                flashDiv.style.opacity = 0;
                setTimeout(() => flashDiv.remove(), 500);
              }
            }, 3000);
          </script>
        {% endif %}
      {% endwith %}

      <!-- Two Separate Form Boxes -->
      <form method="POST" action="{{ url_for('register') }}">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Left Form Box: Account Details -->
          <div class="p-4 border rounded shadow">
            <h3 class="text-xl font-bold mb-4 text-center">Account Details</h3>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">Username</label>
              <input type="text" name="username" required
                     class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring" />
            </div>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">Password</label>
              <input type="password" name="password" required
                     class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring" />
            </div>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">Phone</label>
              <input type="text" name="phone" required
                     class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring" />
            </div>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">Meter Number</label>
              <input type="text" name="meter_number" required
                     class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring" />
              <p class="text-sm text-gray-500 mt-1">Format: W00DistrictID00SectorID0000</p>
            </div>
          </div>

          <!-- Right Form Box: Location Details -->
          <div class="p-4 border rounded shadow">
            <h3 class="text-xl font-bold mb-4 text-center">Location Details</h3>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">Gender</label>
              <select name="gender" required
                      class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring">
                <option value="" disabled selected>Select Gender</option>
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
              </select>
            </div>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">Province</label>
              <select name="province" required
                      class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring">
                <option value="" disabled selected>Select Province</option>
                <option>Eastern</option>
                <option>Western</option>
                <option>Northern</option>
                <option>Southern</option>
                <option>Kigali</option>
              </select>
            </div>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">District</label>
              <input type="text" name="district" required
                     class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring" />
            </div>
            <div class="mb-4">
              <label class="block mb-1 font-semibold">Sector</label>
              <input type="text" name="sector" required
                     class="w-full border border-gray-300 p-2 rounded focus:outline-none focus:ring" />
            </div>
          </div>
        </div>
        
        <!-- Full-Width Submit Button -->
        <div class="mt-6">
          <button type="submit"
                  class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600 font-semibold transition-colors">
            Register
          </button>
        </div>
      </form>
    </div>
  </main>
</body>
</html>
